<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apps Grid</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<style>
:root {
  --bg: #162323;
  --grid: rgba(255, 255, 255, 0.05);
  --text: #e6e6ff;
  --border: rgba(255, 255, 255, 0.12);
  --card-bg: rgba(255, 255, 255, 0.04);
  --shadow: rgba(0, 0, 0, 0.65);
}

body {
  margin: 0;
  font-family: 'Poppins', Inter, sans-serif;
  color: var(--text);
  background:
    linear-gradient(var(--grid) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid) 1px, transparent 1px),
    var(--bg);
  background-size: 40px 40px;
}

.hero {
  padding-top: 20vh;
  padding-bottom: 4rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.hero h1 { font-size: 3.2rem; font-weight: 600; margin: 0; }
.hero p { margin: 0.4rem 0 2.2rem; font-size: 1.05rem; font-weight: 500; opacity: 0.6; }

#searchBar {
  width: 100%;
  max-width: 680px;
  padding: 1.3rem 1.4rem;
  font-size: 1.15rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
  outline: none;
  backdrop-filter: blur(12px);
}

.main {
  padding: 2.5rem;
  display: flex;
  justify-content: center;
}

#container {
  width: 100%;
  max-width: 1800px;
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 1.6rem;
}

@media (max-width: 1600px) { #container { grid-template-columns: repeat(6, 1fr); } }
@media (max-width: 1200px) { #container { grid-template-columns: repeat(4, 1fr); } }
@media (max-width: 700px) { #container { grid-template-columns: repeat(2, 1fr); } }

.zone-item {
  position: relative;
  aspect-ratio: 1;
  border-radius: 12px;
  overflow: hidden;
  cursor: pointer;
  background: var(--card-bg);
  border: 1px solid var(--border);
  transition: transform 0.35s ease, box-shadow 0.35s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text);
  font-weight: 600;
  font-size: 1.2rem;
  user-select: none;
}

.zone-item:hover {
  transform: scale(1.08);
  box-shadow: 0 25px 55px var(--shadow);
}

.zone-item img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.45s ease, filter 0.45s ease, opacity 0.25s ease;
  pointer-events: none;
}

.zone-item:hover img {
  transform: scale(1.1);
  filter: brightness(0.45);
}

.zone-name-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 1rem;
  font-family: 'Poppins', sans-serif;
  font-size: 1.35rem;
  font-weight: 500;
  color: #fff;
  opacity: 0;
  transition: opacity 0.3s ease;
  background: rgba(0, 0, 0, 0.35);
}

.zone-item:hover .zone-name-overlay {
  opacity: 1;
}

#fullscreenOverlay {
  position: fixed;
  inset: 0;
  background: #000;
  display: none;
  flex-direction: column;
  z-index: 3000;
}

#fullscreenHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.2rem;
  background: rgba(0, 0, 0, 0.85);
}

#fullscreenHeader h2 {
  font-family: 'Poppins', sans-serif;
  font-size: 1.3rem;
  font-weight: 500;
  margin: 0;
}

.header-btn {
  background: none;
  border: none;
  color: #fff;
  font-size: 1.5rem;
  cursor: pointer;
}

#zoneFullscreenFrame {
  flex: 1;
  width: 100%;
  border: none;
}
</style>
</head>

<body>
<section class="hero">
  <h1>Apps</h1>
  <p id="gameCount">Showing all Apps</p>
  <input id="searchBar" placeholder="Search Apps..." oninput="filterZones()" />
</section>

<main class="main">
  <div id="container"></div>
</main>

<div id="fullscreenOverlay">
  <div id="fullscreenHeader">
    <h2 id="gameTitle"></h2>
    <div>
      <button class="header-btn" id="fullscreenBtn" title="Fullscreen"><i class="fas fa-expand"></i></button>
      <button class="header-btn" id="closeFullscreen" title="Close"><i class="fas fa-times"></i></button>
    </div>
  </div>
  <iframe id="zoneFullscreenFrame" sandbox="allow-scripts allow-same-origin allow-forms"></iframe>
</div>

<script>
const container = document.getElementById("container");
const count = document.getElementById("gameCount");
const searchBar = document.getElementById("searchBar");
const overlay = document.getElementById("fullscreenOverlay");
const iframe = document.getElementById("zoneFullscreenFrame");
const title = document.getElementById("gameTitle");
const closeBtn = document.getElementById("closeFullscreen");
const fullscreenBtn = document.getElementById("fullscreenBtn");

// Add your Apps here
const zones = [
  {
    name: "Ai",
    img: "https://github.com/dotdmi/apps/blob/main/gpt.png?raw=true",
    fetchHTML: "https://cdn.jsdelivr.net/gh/dotdmi/apps@main/assistant.html"
  },
  {
    name: "Spotify",
    img: "https://github.com/dotdmi/apps/blob/main/spotify.png?raw=true",
    fetchHTML: "https://cdn.jsdelivr.net/gh/x8rr/music@main/index.html"
  },
  {
    name: "Soundboard",
    img: "https://github.com/dotdmi/apps/blob/main/so.png?raw=true",
    fetchHTML: "https://cdn.jsdelivr.net/gh/dotdmi/apps@main/Soundboard.html"
  },
  {
    name: "Code Editor",
    img: "https://github.com/dotdmi/apps/blob/main/vscde.png?raw=true",
    fetchHTML: "https://cdn.jsdelivr.net/gh/dotdmi/apps@main/code.html"
  },
  {
    name: "Nautilus OS",
    img: "https://github.com/dotdmi/apps/blob/main/240241840%20(1)-Photoroom.png?raw=true",
    fetchHTML: "https://cdn.jsdelivr.net/gh/dotdmi/apps@main/os.html"
  },
];

function displayZones(list = zones) {
  container.innerHTML = "";
  count.textContent = `Showing ${list.length} Apps`;

  list.forEach(zone => {
    const card = document.createElement("div");
    card.className = "zone-item";

    if (zone.img) {
      const img = document.createElement("img");
      img.src = zone.img;
      img.alt = zone.name;
      card.appendChild(img);
    } else {
      card.textContent = zone.name;
    }

    const nameOverlay = document.createElement("div");
    nameOverlay.className = "zone-name-overlay";
    nameOverlay.textContent = zone.name;

    card.appendChild(nameOverlay);
    card.onclick = () => openZone(zone);

    container.appendChild(card);
  });
}

function filterZones() {
  const q = searchBar.value.toLowerCase();
  const filtered = zones.filter(z => z.name.toLowerCase().includes(q));
  displayZones(filtered);
}

// Open tool overlay
function openZone(zone) {
  title.textContent = zone.name;
  overlay.style.display = "flex";

  if (zone.fetchHTML) {
    // Use fetch + document.write inside iframe
    fetch(zone.fetchHTML + "?t=" + Date.now())
      .then(res => res.text())
      .then(html => {
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        doc.open();
        doc.write(html);
        doc.close();
      })
      .catch(err => {
        alert("Failed to load GN Math");
        console.error(err);
      });
  } else if (zone.url) {
    iframe.src = zone.url;
  } else {
    iframe.src = "about:blank";
  }
}

closeBtn.onclick = () => {
  overlay.style.display = "none";
  iframe.src = "about:blank";
};

fullscreenBtn.onclick = () => {
  if (iframe.requestFullscreen) iframe.requestFullscreen();
  else if (iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen();
  else if (iframe.msRequestFullscreen) iframe.msRequestFullscreen();
};

displayZones();
</script>
</body>
</html>
